import{n as l,C as p,B as V,a as i,b as c,_ as F,D as w}from"./index.2a46fca1.js";var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.connection.isHighlighted?n("div",{staticClass:"block__dropzone",class:{vertical:e.isVertical,inline:e.isInline,absolute:e.absolute}}):e._e()},E=[];const M={name:"BlockDropzone",props:{connection:{type:p,required:!0},absolute:Boolean,inline:Boolean},computed:{block(){return this.connection.block},isInput(){return this.connection.type==p.Input},isVertical(){return this.isInput&&!this.block.isInline},isInline(){return this.isInput&&this.block.isInline}}},d={};var z=l(M,j,E,!1,P,"7975516e",null,null);function P(e){for(let t in d)this[t]=d[t]}const _=function(){return z.exports}(),S={block:{type:V,required:!0},input:{type:i,required:!0}},L={scratch(){return this.block.scratch},renderer(){return this.scratch.renderer},inputBlock(){var e;return this.renderer.getDrawer((e=this.input.connection)==null?void 0:e.getTargetBlock())},nextInputIsStatement(){var e;return((e=this.input.getNext())==null?void 0:e.type)==i.Statement},style(){return{backgroundColor:this.block.colors.background,color:this.block.colors.text}},fieldsStyle(){return{justifyContent:{[i.Alignment.Right]:"flex-end",[i.Alignment.Left]:"flex-start",[i.Alignment.Center]:"center"}[this.input.align]}}},C={props:S,computed:L};var O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",e._b({staticClass:"scratch__dynamic-input",style:{width:e.width},on:{input:function(s){return e.$emit("input",s.target.value)},mousedown:function(s){s.stopPropagation()}}},"input",{type:e.type,value:e.value,placeholder:e.placeholder},!1))},T=[];const A={name:"DynamicInput",props:{type:String,value:void 0,placeholder:String},data(){return{isMounted:!1}},computed:{offset(){return this.type=="number"?3:1},width(){if(!this.isMounted)return null;let e=this.value||this.getPlaceholder();return e?`${e.length+this.offset}ch`:null}},mounted(){this.isMounted=!0},methods:{getPlaceholder(){const e=this.$el;return e?e.getAttribute("placeholder"):""}}},v={};var N=l(A,O,T,!1,q,"12a10253",null,null);function q(e){for(let t in v)this[t]=v[t]}const G=function(){return N.exports}(),D={field:{type:c,required:!0}},H={DynamicInput:G},a={props:D,components:H};var J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DynamicInput",{staticClass:"block__field__text",attrs:{type:"text",placeholder:e.field.placeholder},model:{value:e.field.value,callback:function(s){e.$set(e.field,"value",s)},expression:"field.value"}})},K=[];const Q={name:"BlockTextField",mixins:[a]},m={};var U=l(Q,J,K,!1,W,null,null,null);function W(e){for(let t in m)this[t]=m[t]}const X=function(){return U.exports}();var Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"block__field__label",domProps:{textContent:e._s(e.field.value)}})},Z=[];const ee={name:"BlockLabelField",mixins:[a]},f={};var te=l(ee,Y,Z,!1,ne,null,null,null);function ne(e){for(let t in f)this[t]=f[t]}const se=function(){return te.exports}();var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DynamicInput",{staticClass:"block__field__text",attrs:{type:"number",placeholder:e.field.placeholder},model:{value:e.field.value,callback:function(s){e.$set(e.field,"value",s)},expression:"field.value"}})},le=[];const oe={name:"BlockNumberField",mixins:[a]},h={};var ie=l(oe,re,le,!1,ce,null,null,null);function ce(e){for(let t in h)this[t]=h[t]}const ae=function(){return ie.exports}();var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],ref:"select",staticClass:"block__field__select",on:{mousedown:e.updateOptions,change:function(s){var o=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var u="_value"in r?r._value:r.value;return u});e.$set(e.field,"value",s.target.multiple?o:o[0])}}},[n("option",{attrs:{selected:"",disabled:"",hidden:""},domProps:{value:null,textContent:e._s(e.field.placeholder)}}),e._l(e.field.options,function(s,o){return n("option",{key:o,domProps:{value:s,textContent:e._s(s)}})})],2)},_e=[];const pe={name:"BlockSelectField",mixins:[a],methods:{updateOptions(){this.field.updateOptions()}}},b={};var de=l(pe,ue,_e,!1,ve,"734553e8",null,null);function ve(e){for(let t in b)this[t]=b[t]}const me=function(){return de.exports}();var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],ref:"select",staticClass:"block__field__variable",on:{change:function(s){var o=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var u="_value"in r?r._value:r.value;return u});e.$set(e.field,"value",s.target.multiple?o:o[0])}}},e._l(e.variables,function(s){return n("option",{key:s.name,domProps:{value:s,textContent:e._s(s.name)}})}),0)},he=[];const be={name:"BlockVariableField",mixins:[a],computed:{variables(){return this.field.block.scratch.getVariables()}}},k={};var ke=l(be,fe,he,!1,$e,"67091749",null,null);function $e(e){for(let t in k)this[t]=k[t]}const ye=function(){return ke.exports}();var xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.component,e._b({tag:"component"},"component",{field:e.field},!1))},ge=[];const Be={name:"BlockField",mixins:[{props:D}],components:{TextField:X,LabelField:se,NumberField:ae,SelectField:me,VariableField:ye},computed:{component(){return{[c.Text]:"TextField",[c.Label]:"LabelField",[c.Number]:"NumberField",[c.Select]:"SelectField",[c.Variable]:"VariableField"}[this.field.type]}}},$={};var Ie=l(Be,xe,ge,!1,Fe,null,null,null);function Fe(e){for(let t in $)this[t]=$[t]}const Se=function(){return Ie.exports}();var Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"block__value__wrapper"},[n("div",{staticClass:"block__value",class:e.classes,style:Object.assign({},e.style,e.fieldsStyle),attrs:{id:e.externalId}},[e._l(e.input.fields,function(s,o){return n("BlockField",e._b({key:o},"BlockField",{field:s},!1))}),e.block.isInline&&!e.isDummy?n("div",{staticClass:"block__value__inline-input",class:{empty:!e.inputBlock},attrs:{id:e.inlineId}},[e.input.hasValue()&&e.block.isInline?n("Dropzone",{attrs:{connection:e.input.connection,inline:""}}):e._e(),e.block.isInline&&e.inputBlock?n("BlockRenderer",{attrs:{drawer:e.inputBlock}}):e._e()],1):e._e()],2),e.input.hasValue()&&!e.block.isInline?n("Dropzone",{attrs:{connection:e.input.connection}}):e._e(),!e.block.isInline&&e.inputBlock?n("BlockRenderer",{attrs:{drawer:e.inputBlock}}):e._e()],1)},De=[];const Re={name:"InputValue",mixins:[C],components:{BlockRenderer:()=>F(()=>Promise.resolve().then(()=>R),void 0),BlockField:Se,Dropzone:_},computed:{isDummy(){return this.input.type==i.Dummy},externalId(){return this.block.isInline?null:this.input.id},inlineId(){return this.block.isInline?this.input.id:null},classes(){return this.block.hasOutput()||this.block.isInline?{inline:!0}:{"block--border-tl":this.input.isFirst(),"block--border-bl":this.input.isLast(),"block--border-tr":this.input.isFirst()&&this.isDummy,"block--border-br":(this.input.isLast()||this.nextInputIsStatement)&&this.isDummy}}}},y={};var Ve=l(Re,Ce,De,!1,we,"2df2ce66",null,null);function we(e){for(let t in y)this[t]=y[t]}const x=function(){return Ve.exports}();var je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block__statement"},[n("div",{staticClass:"block__statement__vertical-section"},[n("div",{staticClass:"block__statement__bar",style:e.style}),n("div",{staticClass:"block__statement__children",attrs:{id:e.input.id}},[e.inputBlock?n("BlockRenderer",{attrs:{drawer:e.inputBlock},scopedSlots:e._u([{key:"top-zone",fn:function(){return[e.input.hasValue()?n("Dropzone",{attrs:{connection:e.input.connection}}):e._e()]},proxy:!0}],null,!1,2549530340)}):e.input.hasValue()?n("Dropzone",{attrs:{connection:e.input.connection}}):e._e()],1)]),e.input.isLast()||e.nextInputIsStatement?n("div",{staticClass:"block__statement__footer",class:e.borderClasses,style:e.style}):e._e()])},Ee=[];const Me={name:"InputStatement",mixins:[C],components:{BlockRenderer:()=>F(()=>Promise.resolve().then(()=>R),void 0),Dropzone:_},computed:{borderClasses(){return{"block--border-last":this.input.isLast()}}}},g={};var ze=l(Me,je,Ee,!1,Pe,"2f6ac0fc",null,null);function Pe(e){for(let t in g)this[t]=g[t]}const Le=function(){return ze.exports}();var Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.component,e._b({tag:"component"},"component",{block:e.block,input:e.input},!1))},Te=[];const Ae={name:"BlockInput",mixins:[{props:S}],components:{Dummy:x,Statement:Le,Value:x},computed:{component(){return{[i.Dummy]:"Dummy",[i.Value]:"Value",[i.Statement]:"Statement"}[this.input.type]}}},B={};var Ne=l(Ae,Oe,Te,!1,qe,null,null,null);function qe(e){for(let t in B)this[t]=B[t]}const Ge=function(){return Ne.exports}();var He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scratch__block__overlay",class:{relative:e.isRelative,dragged:e.block.isDragged},style:{transform:e.transform}},[n("div",{staticClass:"scratch__block",attrs:{id:e.block.id},on:{mousedown:function(s){return s.stopPropagation(),e.block.dragStart(s)}}},[e.block.hasPrev()?e._t("top-zone",function(){return[n("Dropzone",{attrs:{connection:e.block.previousConnection,absolute:!e.isRelative}})]}):e._e(),e._l(e.drawer.getInputGroups(),function(s,o){return n("div",{key:o,staticClass:"scratch__block__inputs-group",class:{inline:e.block.isInline}},e._l(s,function(r){return n("BlockInput",e._b({key:r.id},"BlockInput",{block:e.block,input:r},!1))}),1)}),e.block.hasNext()?e._t("bottom-zone",function(){return[n("Dropzone",{attrs:{connection:e.block.nextConnection}})]}):e._e()],2),e.nextBlock?n("Block",{attrs:{drawer:e.nextBlock}}):e._e()],1)},Je=[];const Ke={name:"Block",props:{drawer:{type:w,required:!0}},components:{Dropzone:_,BlockInput:Ge},computed:{renderer(){return this.drawer.renderer},block(){return this.drawer.block},isRelative(){return this.block.isRelative()},transform(){return this.isRelative?null:`translate(${this.block.position.x}px, ${this.block.position.y}px)`},nextBlock(){var e;return this.renderer.getDrawer((e=this.block.nextConnection)==null?void 0:e.getTargetBlock())}}},I={};var Qe=l(Ke,He,Je,!1,Ue,"08785e99",null,null);function Ue(e){for(let t in I)this[t]=I[t]}const We=function(){return Qe.exports}(),R=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));export{We as default};
