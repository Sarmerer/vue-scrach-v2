import{b as i,n as l,B as c}from"./index.2e594b50.js";const a={field:{type:i,required:!0}},u={absolutePosition(){return this.field.position},relativePosition(){return this.field.relativePosition}},d={props:a,computed:u};var _=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("g",t._b({},"g",{transform:t.transform},!1),[o("text",{staticClass:"block__field__text",attrs:{fill:t.color,x:"0",y:"13"},domProps:{textContent:t._s(t.field.value)}})])},f=[];const p={mixins:[d],computed:{transform(){return`translate(${this.relativePosition.x} ${this.relativePosition.y})`},color(){return this.field.block.colors.text}}},r={};var b=l(p,_,f,!1,h,"0820da66",null,null);function h(t){for(let e in r)this[e]=r[e]}const k=function(){return b.exports}();var m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("g",t._b({staticClass:"scratch__block",on:{mousedown:function(n){return n.stopPropagation(),t.block.dragStart(n)}}},"g",{transform:t.transform},!1),[o("path",{attrs:{id:t.block.id,fill:t.block.colors.background,d:t.drawer.path}}),t._l(t.relativeBlocks,function(n){return o("Block",{key:n.id,attrs:{block:n}})}),t._l(t.textFields,function(n){return o("LabelField",t._b({key:n.id},"LabelField",{field:n},!1))})],2)},v=[];const x={name:"Block",props:{block:{type:c,required:!0}},components:{LabelField:k},watch:{"block.id":{immediate:!0,handler(){this.drawer=this.block.scratch.renderer.getDrawer(this.block)}}},data(){return{drawer:null}},computed:{transform(){const t=this.block.isRelative()?this.block.relativePosition:this.block.position;return`translate(${t.x} ${t.y})`},relativeBlocks(){var e,o;const t=[];(e=this.block.nextConnection)!=null&&e.isConnected()&&t.push(this.block.nextConnection.getTargetBlock());for(const n of this.block.inputs)!((o=n.connection)!=null&&o.isConnected())||t.push(n.connection.getTargetBlock());return t},textFields(){const t=[];for(const e of this.block.inputs)for(const o of e.fields)o.type===i.Label&&t.push(o);return t}},mounted(){this.drawer.didMount||(this.drawer.didMount=!0,this.block.scratch.renderer.update(this.block,{}))}},s={};var g=l(x,m,v,!1,y,null,null,null);function y(t){for(let e in s)this[e]=s[e]}const $=function(){return g.exports}(),P=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as B,P as a,d as m};
